import{j as e}from"./jsx-runtime.DeqwNDbN.js";import{r as c}from"./index.DbYiSJ-C.js";import{c as h}from"./supabase.kJRL6j1B.js";import{_ as i}from"./index.41d0IwRH.js";const f="http://localhost:4321",x="https://myjqdrrqfdugzmuejypz.supabase.co";function b(){const[l,d]=c.useState(!1),[g,n]=c.useState(null);c.useEffect(()=>{(async()=>{console.log(" Inicializando SignInForm..."),console.log(" Site URL:",f);const o=new URLSearchParams(window.location.search),r=o.get("error"),a=o.get("error_description");if(r){console.log(" Error en URL:",{error:r,description:a}),n(a||`Error: ${r}`),i.error(a||`Error: ${r}`);return}try{const t=h();console.log(" Verificando sesión existente...");const{data:{session:m},error:u}=await t.auth.getSession();if(u){console.error(" Error al verificar sesión:",u);return}m?(console.log(" Sesión activa encontrada:",m.user.email),window.location.href="/dashboard"):console.log(" No hay sesión activa")}catch(t){console.error(" Error al verificar sesión:",t)}})()},[]);const p=async()=>{try{d(!0),n(null),console.log(" Iniciando proceso de login con Google...");const s=h(),{data:o,error:r}=await s.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${f}/auth/callback`,queryParams:{access_type:"offline",prompt:"consent"}}});if(r){console.error(" Error de autenticación:",r),n(r.message),i.error(r.message);return}console.log(" Autenticación iniciada correctamente")}catch(s){console.error(" Error inesperado:",s);const o=s instanceof Error?s.message:"Error desconocido";n(o),i.error(o)}finally{d(!1)}};return e.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center bg-gray-900",children:[e.jsx("div",{className:"mb-8",children:e.jsx("img",{src:"/logo.svg",alt:"Slainte",className:"h-16 w-auto"})}),e.jsxs("div",{className:"w-full max-w-md space-y-8 rounded-lg bg-gray-800 p-8 shadow-xl",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-white",children:"Iniciar sesión"}),e.jsx("p",{className:"mt-2 text-gray-400",children:"Ingresa a tu cuenta para continuar"}),g&&e.jsx("div",{className:"mt-4 rounded-md bg-red-500/10 p-4 text-sm text-red-500",children:g})]}),e.jsx("div",{className:"mt-8",children:e.jsx("button",{onClick:p,disabled:l,className:"group relative flex w-full items-center justify-center space-x-2 rounded-lg bg-white px-4 py-3 text-sm font-medium text-gray-700 shadow transition-colors hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",children:e.jsxs("g",{fill:"none",fillRule:"evenodd",children:[e.jsx("path",{d:"M17.64 9.205c0-.639-.057-1.252-.164-1.841H9v3.481h4.844a4.14 4.14 0 01-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615z",fill:"#4285F4"}),e.jsx("path",{d:"M9 18c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332A8.997 8.997 0 009 18z",fill:"#34A853"}),e.jsx("path",{d:"M3.964 10.71A5.41 5.41 0 013.682 9c0-.593.102-1.17.282-1.71V4.958H.957A8.996 8.996 0 000 9c0 1.452.348 2.827.957 4.042l3.007-2.332z",fill:"#FBBC05"}),e.jsx("path",{d:"M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0A8.997 8.997 0 00.957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z",fill:"#EA4335"})]})}),e.jsx("span",{children:l?"Conectando...":"Continuar con Google"})]})})})]})]})}export{b as default};
